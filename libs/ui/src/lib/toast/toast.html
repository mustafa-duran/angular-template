<div
  [attr.data-toast-container]="true"
  [attr.data-theme]="theme()"
  [attr.data-rich-colors]="richColors()"
  [attr.dir]="dir()"
  [class]="toasterClasses + ' ' + className()"
  [ngClass]="positionClasses()"
  [ngStyle]="containerStyles()"
  class="fixed z-100 flex flex-col p-2"
  (mouseenter)="onContainerHover('enter')"
  (mouseleave)="onContainerHover('leave')"
>
  @for (toast of visibleToastsList(); track toast.id; let idx = $index) {
    <div
      [attr.data-toast-id]="toast.id"
      [attr.data-type]="toast.type"
      [attr.data-index]="idx"
      [style.--index]="idx"
      [class]="getToastClasses(toast)"
      [style.z-index]="visibleToastsList().length - idx"
      class="toast-item relative flex items-center justify-between w-[356px] gap-4 rounded-lg border bg-background p-4 shadow-lg"
    >
      <div class="flex items-center gap-3 flex-1">
        @if (toast.type !== 'default') {
          <div class="shrink-0" [innerHTML]="getToastIcon(toast.type)"></div>
        }

        <div class="flex flex-col gap-1">
          @if (toast.title) {
            <div class="text-sm font-semibold">{{ toast.title }}</div>
          }
          @if (toast.description) {
            <div [class]="toastClasses.description" class="text-sm opacity-90">
              {{ toast.description }}
            </div>
          }
        </div>
      </div>

      <div class="flex shrink-0 items-center gap-2">
        @if (toast.action || toast.cancel) {
          @if (toast.cancel) {
            <button
              type="button"
              [class]="toastClasses.cancelButton"
              (click)="handleCancel(toast)"
              class="inline-flex h-8 shrink-0 items-center justify-center rounded-md border px-3 text-xs font-medium transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2"
            >
              {{ toast.cancel.label }}
            </button>
          }
          @if (toast.action) {
            <button
              type="button"
              [class]="toastClasses.actionButton"
              (click)="handleAction(toast.action)"
              class="inline-flex h-8 shrink-0 items-center justify-center rounded-md px-3 text-xs font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2"
            >
              {{ toast.action.label }}
            </button>
          }
        }

        @if (closeButton() && toast.dismissible) {
          <button
            type="button"
            (click)="dismiss(toast.id)"
            class="rounded-md p-1 transition-opacity hover:bg-secondary/80 focus:outline-none focus:ring-2"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <line x1="18" y1="6" x2="6" y2="18"></line>
              <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
          </button>
        }
      </div>
    </div>
  }
</div>
